

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Navigation2 on a Physical Turtlebot 3 &mdash; Navigation 2 0.2.3 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../../_static/favicon-48x48.png"/>
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../../',
              VERSION:'0.2.3',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Navigation2 With External Costmap Plugin" href="navigation2_with_stvl.html" />
    <link rel="prev" title="Navigation2 with Turtlebot 3 in Gazebo" href="navigation2_with_turtlebot3_in_gazebo.html" />

<link rel="stylesheet" href="../../../_static/tcs_theme.css" type="text/css" />


</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> Navigation 2
          

          
            
            <img src="../../../_static/logo_white_200w.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/index.html#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/index.html#running-the-example">Running the Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started/index.html#navigating">Navigating</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../how_it_works/index.html">How It Works</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">How-Tos</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Tutorials</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="navigation2_with_turtlebot3_in_gazebo.html">Navigation2 with Turtlebot 3 in Gazebo</a><ul>
<li class="toctree-l4"><a class="reference internal" href="navigation2_with_turtlebot3_in_gazebo.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="navigation2_with_turtlebot3_in_gazebo.html#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="navigation2_with_turtlebot3_in_gazebo.html#tutorial-steps">Tutorial Steps</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Navigation2 on a Physical Turtlebot 3</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tutorial-steps">Tutorial Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="navigation2_with_stvl.html">Navigation2 With External Costmap Plugin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="navigation2_with_stvl.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="navigation2_with_stvl.html#costmap2d-and-stvl">Costmap2D and STVL</a></li>
<li class="toctree-l4"><a class="reference internal" href="navigation2_with_stvl.html#tutorial-steps">Tutorial Steps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../docs/index.html">Documentation How-Tos</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../docs/index.html#build-guide">Build Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../docs/process/docbuild.html">Build the template locally</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../docs/process/docker-build.html">Use Docker to build this Sphinx project</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../docs/index.html#technical-guides">Technical Guides</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../docs/tech/GeneratedImagesExamples.html">Examples of Generated Images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../docs/tech/important-sphinx-files.html">Important Sphinx files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../docs/tech/pandocs-conversion.html">Pandocs Conversion Tutorial</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../tunning/index.html">Tunning Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tunning/params/tunable-params.html">Tunable Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tunning/params/tunable-params.html#amcl">AMCL</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tunning/params/tunable-params.html#controller-server">Controller Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tunning/params/tunable-params.html#local-costmap">Local Costmap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tunning/params/tunable-params.html#planner-server">Planner Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tunning/params/tunable-params.html#global-costmap">Global Costmap</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tunning/params/tunable-params.html#map-server">Map Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tunning/params/tunable-params.html#recovery-server">Recovery Server</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tunning/params/tunable-params.html#bt-navigator">BT Navigator</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../contribute/index.html">Contributing to the Project</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../contribute/contribute_guidelines.html">Contribution Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/contribute_guidelines.html#licensing">Licensing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/contribute_guidelines.html#developer-certification-of-origin-dco">Developer Certification of Origin (DCO)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../contribute/contribute_guidelines.html#dco-sign-off-methods">DCO Sign-Off Methods</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/contribute_guidelines.html#prerequisites">Prerequisites</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../contribute/doc_guidelines.html">Documentation Guidelines</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#headings">Headings</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../contribute/doc_guidelines.html#this-is-a-collapsible-section">This is a collapsible section</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#content-highlighting">Content Highlighting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#lists">Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#multi-column-lists">Multi-column lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#file-names-and-commands">File names and Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#internal-cross-reference-linking">Internal Cross-Reference Linking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#non-ascii-characters">Non-ASCII Characters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#code-and-command-examples">Code and Command Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../contribute/doc_guidelines.html#tabs-spaces-and-indenting">Tabs, spaces, and indenting</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Navigation 2</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">How-Tos</a> &raquo;</li>
        
          <li><a href="../index.html">Tutorials</a> &raquo;</li>
        
      <li>Navigation2 on a Physical Turtlebot 3</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="navigation2-on-a-physical-turtlebot-3">
<span id="navigation2-on-real-turtlebot3"></span><h1>Navigation2 on a Physical Turtlebot 3<a class="headerlink" href="#navigation2-on-a-physical-turtlebot-3" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#requirements">Requirements</a></li>
<li><a class="reference internal" href="#tutorial-steps">Tutorial Steps</a></li>
<li><a class="reference internal" href="#videos">Videos</a></li>
</ul>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This tutorial shows how to control and navigate Turtlebot 3 using the ROS2 Navigation2 on a physical Turtlebot 3 robot.
Before completing this tutorials, completing the <a class="reference internal" href="navigation2_with_turtlebot3_in_gazebo.html#navigation2-with-turtlebot3-in-gazebo"><span class="std std-ref">Navigation2 with Turtlebot 3 in Gazebo</span></a>. is highly recommended especially if you are new to ROS and Navigation2.</p>
<p>This tutorial consists of two parts. In the first part, you learned how to use Turtlebot 3 robots in simulation (Gazebo).
In this part, you will learn how to control a physical Turtlebot Waffle using Navigation2.</p>
<p><code class="docutils literal notranslate"><span class="pre">ROS2</span> <span class="pre">Dashing</span></code> and <code class="docutils literal notranslate"><span class="pre">Navigation2</span> <span class="pre">Dashing</span> <span class="pre">0.2.4</span></code> are used to create this tutorial.
You should be able to do this tutorial using other Navigation2 versions as well.</p>
<p>This tutorial may take about 1 hour to complete.
It depends on your experience with ROS, robots, and what computer system you have.</p>
</div>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h2>
<p>You must install Navigation2, Turtelbot3.
If you don’t have them installed, please follow <a class="reference internal" href="navigation2_with_turtlebot3_in_gazebo.html#navigation2-with-turtlebot3-in-gazebo"><span class="std std-ref">Navigation2 with Turtlebot 3 in Gazebo</span></a>.</p>
</div>
<div class="section" id="tutorial-steps">
<h2>Tutorial Steps<a class="headerlink" href="#tutorial-steps" title="Permalink to this headline">¶</a></h2>
<div class="section" id="setup-your-enviroment-variables">
<h3>0- Setup Your Enviroment Variables<a class="headerlink" href="#setup-your-enviroment-variables" title="Permalink to this headline">¶</a></h3>
<p>Run the following commands first whenever you open a new terminal during this tutorial.</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">/opt/ros/&lt;ros2-distro&gt;/setup.bash</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">TURTLEBOT3_MODEL=waffle</span></code></li>
</ul>
</div>
<div class="section" id="launch-turtlebot-3-robot-state-publisher">
<h3>1- Launch Turtlebot 3 Robot State Publisher<a class="headerlink" href="#launch-turtlebot-3-robot-state-publisher" title="Permalink to this headline">¶</a></h3>
<p>Launch Turtlebot 3 robot state publisher,</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">launch</span> <span class="pre">turtlebot3_bringup</span> <span class="pre">turtlebot3_state_publisher.launch.py</span> <span class="pre">use_sim_time:=False</span></code></div></blockquote>
<p>Note: use_sim_time is set to <strong>False</strong> because we’re on a physical robot.</p>
</div>
<div class="section" id="launch-navigation2">
<h3>2- Launch Navigation2<a class="headerlink" href="#launch-navigation2" title="Permalink to this headline">¶</a></h3>
<p>You need to have a map of the environment where you want to Navigate Turtlebot 3, or create one live with SLAM.</p>
<p>In case you are interested, there is a use case tutorial which shows how to use Navigation2 with SLAM.
<a class="reference external" href="https://github.com/ros-planning/navigation2/blob/master/doc/use_cases/navigation_with_slam.md">Navigation2 with SLAM</a></p>
<p>Required files:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">your-map.map</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">your-map.yaml</span></code></li>
</ul>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">&lt;your_map&gt;.yaml</span></code> is the configuration file for the map we want to provide Navigation2.
In this case, it has the map resolution value, threshold values for obstacles and free spaces, and a map file location.
You need to make sure these values are correct.
More information about the map.yaml can be found <a class="reference external" href="http://wiki.ros.org/map_server">here</a>.</p>
<p>Launch Navigation 2. If you set autostart:=False, you need to click on the start button in RViz to initialize the nodes.
Make sure <cite>use_sim time</cite> is set to <strong>False</strong>, because we want to use the system time instead of the time simulation time from Gazebo.</p>
<p><code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">launch</span> <span class="pre">nav2_bringup</span> <span class="pre">nav2_bringup_launch.py</span> <span class="pre">use_sim_time:=False</span> <span class="pre">autostart:=False</span> <span class="pre">map:=/path/to/your-map.yaml</span></code></p>
<p>Note: Don’t forget to change <strong>/path/to/your-map.yaml</strong> to the actual path to the your-map.yaml file.</p>
</div>
<div class="section" id="launch-rviz">
<h3>3-  Launch RVIZ<a class="headerlink" href="#launch-rviz" title="Permalink to this headline">¶</a></h3>
<p>Launch RVIZ with a pre-defined configuration file.</p>
<blockquote>
<div><code class="docutils literal notranslate"><span class="pre">ros2</span> <span class="pre">run</span> <span class="pre">rviz2</span> <span class="pre">rviz2</span> <span class="pre">-d</span> <span class="pre">$(ros2</span> <span class="pre">pkg</span> <span class="pre">prefix</span> <span class="pre">nav2_bringup)/share/nav2_bringup/launch/nav2_default_view.rviz</span></code></div></blockquote>
<p>Now, you should see a shadow of Turtlebot 3 robot model in the center of the plot in Rviz.
Click on the Start button (Bottom Left) if you set the auto_start parameter to false.</p>
<a class="reference internal image-reference" href="../../../_images/rviz_after_launch_view.png"><img alt="RViz after launch, auto_start = False" src="../../../_images/rviz_after_launch_view.png" style="width: 1024px; height: 720px;" /></a>
<p>Now, the map should appear in RViz.</p>
<a class="reference internal image-reference" href="../../../_images/rviz_slam_map_view.png"><img alt="A map generated by using SLAM in RViz" src="../../../_images/rviz_slam_map_view.png" style="width: 1024px; height: 720px;" /></a>
</div>
<div class="section" id="initialize-the-location-of-turtlebot-3">
<h3>4- Initialize the Location of Turtlebot 3<a class="headerlink" href="#initialize-the-location-of-turtlebot-3" title="Permalink to this headline">¶</a></h3>
<p>First, find where the robot is on the map. Check where your robot is in the room.</p>
<p>Set the pose of the robot in RViz.
Click on the 2D Pose Estimate button and point the location of the robot on the map.
The direction of the green arrow is the orientation of Turtlebot.</p>
<a class="reference internal image-reference" href="../../../_images/rviz_set_initial_pose.png"><img alt="Set initial pose in RViz" src="../../../_images/rviz_set_initial_pose.png" style="width: 1024px; height: 720px;" /></a>
<p>Now, the 3D model of Turtlebot should move to that location.
A small error in the estimated location is tolerable.</p>
</div>
<div class="section" id="send-a-goal-pose">
<h3>5-  Send a Goal Pose<a class="headerlink" href="#send-a-goal-pose" title="Permalink to this headline">¶</a></h3>
<p>Pick a target location for Turtlebot on the map.
You can send Turtlebot 3 a goal position and a goal orientation by using the <strong>Navigation2 Goal</strong> or the <strong>GoalTool</strong> buttons.</p>
<p>Note: Navigation2 Goal button uses a ROS2 Action to send the goal and the GoalTool publishes the goal to a topic.</p>
<a class="reference internal image-reference" href="../../../_images/rviz_send_goal.png"><img alt="Send goal pose in RViz" src="../../../_images/rviz_send_goal.png" style="width: 1024px; height: 720px;" /></a>
<p>Once you define the target pose,  Navigation2 will find a global path and start navigating the robot on the map.</p>
<a class="reference internal image-reference" href="../../../_images/rviz_robot_navigating.png"><img alt="Robot navigating in RViz" src="../../../_images/rviz_robot_navigating.png" style="width: 1024px; height: 720px;" /></a>
<p>Now, you can see that Turtlebot 3 moves towards the goal position in the room. See the video below.</p>
</div>
<div class="section" id="videos">
<h3>Videos<a class="headerlink" href="#videos" title="Permalink to this headline">¶</a></h3>
<div style="position: relative; padding-bottom: 0%; overflow: hidden; max-width: 100%; height: auto;">
  <iframe width="960" height="720" src="https://www.youtube.com/embed/ZeCds7Sv-5Q" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019
      <span class="lastupdated">
        Last updated on Dec 18, 2019.
      </span>

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  

<script type="text/javascript" src="../../../_static/tcs_theme.js"></script>



</body>
</html>